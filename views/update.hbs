<h1 class="container">Change your preferences</h1>

{{#if errorMessage}}
<div class="alert alert-danger">
  ERROR: {{errorMessage}}
</div>
{{/if}}
{{#if message}}
<div class="alert alert-success">
  {{message}}
</div>
{{/if}}

<div class="container px-lg-5">
  <div class="row mx-lg-n5">
    <div class="col py-3 px-lg-5 border bg-light">
      <form method="POST" action="/user/update">
        <div class="form-group">
          <label for="register-human-name">Preferred name</label>
          <input class="inputfield" type="text" name="humanName" id="register-human-name" value="{{currName}}" />
        </div>
        <div class="form-group">
          <label for="register-language">Language of interest:</label>
          <select id="register-language" name="language">
            {{#each languages}}
            <option value="{{this}}">{{this}}</option>
            {{/each}}
          </select>
        </div>
        <div class="form-group">
          <button id="button">Update preferences</button>
        </div>
      </div>

      <div class="col py-3 px-lg-5 border bg-light">
             <label for="register-role">Where did you learn <span id="selected-language">your language of interest</span>?
            Drag/zoom the map to move the marker </label>
          <label for="register-latitude">Latitude</label><input class="inputfield" readonly id="register-latitude" name="latitude"
            value="{{currLat}}" style="width: 80px;"/>
          <label for="register-longitude">Longitude</label><input class="inputfield" readonly id="register-longitude" name="longitude"
            value="{{currLng}}" style="width: 80px;"/><label>
          <div id="map" style="height: 500px; width: 500px;"></div>
      </div>
      </form>
  </div>
</div>

<script src="https://maps.googleapis.com/maps/api/js?key={{googMapsApiKey}}"></script>
<script type="text/javascript" src="/scripts/updateMap.js"></script>
<script>
  const $selector = document.getElementById("register-language");
  $selector.value = "{{currLang}}";
  const $languageSpan = document.getElementById("selected-language");
  $languageSpan.innerText = "{{currLang}}";
</script>